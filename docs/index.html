<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG –¢—Ä–µ–∫–µ—Ä –û–±—É—á–µ–Ω–∏—è - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ú–æ—Ç–∏–≤–∞—Ü–∏—è</title>
    <style>
        :root {
            --primary: #2A2D43;
            --secondary: #4361EE;
            --accent: #4CC9F0;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --text: #E8EAED;
            --background: #121212;
            --surface: #1E1E1E;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            background: var(--surface);
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid var(--secondary);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #B0B0B0;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 900px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: var(--surface);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid #333;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
        }
        
        h2 {
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--text);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        
        .habits-list {
            margin-top: 20px;
        }
        
        .habit-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #333;
        }
        
        .habit-item:last-child {
            border-bottom: none;
        }
        
        .habit-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent);
            border-radius: 4px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .habit-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }
        
        .habit-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-size: 14px;
        }
        
        .level-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .level-novice {
            background: var(--success);
            color: white;
        }
        
        .level-fighter {
            background: var(--warning);
            color: black;
        }
        
        .level-veteran {
            background: var(--danger);
            color: white;
        }
        
        .combo-display {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: rgba(67, 97, 238, 0.2);
            margin: 15px 0;
        }
        
        .combo-count {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .financial-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .financial-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .money-positive {
            color: var(--success);
        }
        
        .money-negative {
            color: var(--danger);
        }
        
        .system-rules {
            margin-top: 20px;
        }
        
        .rule-section {
            margin-bottom: 25px;
        }
        
        .rule-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .rule-list {
            margin-left: 20px;
        }
        
        .rule-list li {
            margin-bottom: 8px;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(45deg, var(--secondary), var(--accent));
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin: 10px 0;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(67, 97, 238, 0.3);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--accent);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .quest-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        
        .quest-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent);
            border-radius: 4px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .quest-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }
        
        .quest-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-size: 14px;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .history-table th, .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        
        .history-table th {
            background: rgba(255, 255, 255, 0.05);
            color: var(--accent);
        }
        
        .history-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .settings-panel {
            margin-top: 20px;
        }
        
        .setting-item {
            margin-bottom: 15px;
        }
        
        .setting-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .setting-item input, .setting-item select {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #444;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .week-selector {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
        }
        
        .week-nav {
            display: flex;
            gap: 10px;
        }
        
        .week-nav-btn {
            padding: 8px 15px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .export-section {
            margin-top: 30px;
            text-align: center;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .export-btn {
            padding: 10px 20px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>RPG –¢—Ä–µ–∫–µ—Ä –û–±—É—á–µ–Ω–∏—è</h1>
            <p class="subtitle">–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è ‚Ä¢ –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ‚Ä¢ –ö–æ–º–±–æ-—Å–∏—Å—Ç–µ–º–∞ ‚Ä¢ –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏</p>
        </header>
        
        <div class="week-selector">
            <div>
                <h3>–ù–µ–¥–µ–ª—è: 16-22 –ù–æ—è–±—Ä—è 2025</h3>
                <p>–¢–µ–∫—É—â–∏–π –¥–µ–ø–æ–∑–∏—Ç: <strong>1,000 ‚ÇΩ</strong></p>
            </div>
            <div class="week-nav">
                <button class="week-nav-btn" onclick="changeWeek(-1)">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                <button class="week-nav-btn" onclick="changeWeek(1)">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</button>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h2>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
                    <div class="level-badge level-fighter">–£—Ä–æ–≤–µ–Ω—å: –ë–æ–µ—Ü</div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div>–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–Ω—è</div>
                        <div class="stat-value" id="day-progress">63%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-bar" style="width: 63%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div>–í—ã–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–∏–≤—ã—á–µ–∫</div>
                        <div class="stat-value" id="habits-completed">5/8</div>
                    </div>
                    
                    <div class="stat-card">
                        <div>–¢–µ–∫—É—â–µ–µ –∫–æ–º–±–æ</div>
                        <div class="stat-value" id="combo-days">3 –¥–Ω—è</div>
                    </div>
                    
                    <div class="stat-card">
                        <div>–î–µ–ø–æ–∑–∏—Ç –Ω–∞ –Ω–µ–¥–µ–ª—é</div>
                        <div class="stat-value" id="weekly-deposit">1,000 ‚ÇΩ</div>
                    </div>
                </div>
                
                <div class="combo-display" id="combo-display">
                    <div>–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–æ–º–±–æ: 3 –¥–Ω—è</div>
                    <div class="combo-count">3 –¥–Ω—è ‚Üí 50% –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–ø–æ–∑–∏—Ç–∞</div>
                    <div>–°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å: 5 –¥–Ω–µ–π ‚Üí 100% –≤–æ–∑–≤—Ä–∞—Ç–∞</div>
                </div>
                
                <h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏</h3>
                <div class="habits-list" id="habits-list">
                    <!-- –ü—Ä–∏–≤—ã—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
            
            <div class="card">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('finance')">–§–∏–Ω–∞–Ω—Å—ã</div>
                    <div class="tab" onclick="switchTab('quests')">–ö–≤–µ—Å—Ç—ã</div>
                    <div class="tab" onclick="switchTab('levels')">–£—Ä–æ–≤–Ω–∏</div>
                    <div class="tab" onclick="switchTab('history')">–ò—Å—Ç–æ—Ä–∏—è</div>
                    <div class="tab" onclick="switchTab('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                </div>
                
                <div id="finance" class="tab-content active">
                    <h3>–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞</h3>
                    <p style="margin-bottom: 15px; color: #B0B0B0;">–í–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –≤ –∏–≥—Ä–µ. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ —Å –±–æ–Ω—É—Å–æ–º –∏–ª–∏ —Ç–µ—Ä—è–π—Ç–µ –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ.</p>
                    
                    <div class="financial-stats">
                        <div class="financial-card">
                            <div>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç</div>
                            <div class="stat-value">1,000+ ‚ÇΩ</div>
                            <div style="font-size: 0.9rem;">–°—É–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª—å–Ω–æ –±–æ–ª–∏—Ç</div>
                        </div>
                        
                        <div class="financial-card">
                            <div>–í–æ–∑–≤—Ä–∞—Ç √ó2</div>
                            <div class="stat-value">6/7 –¥–Ω–µ–π</div>
                            <div style="font-size: 0.9rem;">+ 100% –∫–≤–µ—Å—Ç–æ–≤</div>
                        </div>
                        
                        <div class="financial-card">
                            <div>–ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç</div>
                            <div class="stat-value">5/7 –¥–Ω–µ–π</div>
                            <div style="font-size: 0.9rem;">+ 80% –∫–≤–µ—Å—Ç–æ–≤</div>
                        </div>
                        
                        <div class="financial-card">
                            <div>–ü—Ä–æ–≤–∞–ª</div>
                            <div class="stat-value money-negative">0%</div>
                            <div style="font-size: 0.9rem;">–î–µ–Ω—å–≥–∏ —Å–≥–æ—Ä–∞—é—Ç</div>
                        </div>
                    </div>
                    
                    <div class="system-rules">
                        <div class="rule-section">
                            <div class="rule-title">üí• –ö–û–ú–ë–û-–°–ò–°–¢–ï–ú–ê</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div>
                                    <div style="color: var(--success); margin-bottom: 10px;">‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ë–û:</div>
                                    <ul class="rule-list">
                                        <li>3 –¥–Ω—è ‚Üí –≤–æ–∑–≤—Ä–∞—Ç 50% –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞</li>
                                        <li>5 –¥–Ω–µ–π ‚Üí –≤–æ–∑–≤—Ä–∞—Ç 100% –¥–µ–ø–æ–∑–∏—Ç–∞</li>
                                        <li>7 –¥–Ω–µ–π ‚Üí –≤–æ–∑–≤—Ä–∞—Ç √ó2</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <div style="color: var(--danger); margin-bottom: 10px;">‚ùå –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ë–û:</div>
                                    <ul class="rule-list">
                                        <li>–ü—Ä–æ–ø—É—Å–∫ 1 –¥–Ω—è ‚Üí –æ–±–Ω—É–ª–µ–Ω–∏–µ –∫–æ–º–±–æ</li>
                                        <li>–ü—Ä–æ–ø—É—Å–∫ 2 –¥–Ω–µ–π ‚Üí -50% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞</li>
                                        <li>–ü—Ä–æ–ø—É—Å–∫ 3 –¥–Ω–µ–π ‚Üí –¥–µ–ø–æ–∑–∏—Ç —Å–≥–æ—Ä–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rule-section">
                            <div class="rule-title">üìà –°–ò–°–¢–ï–ú–ê –†–ï–ö–û–†–î–û–í</div>
                            <ul class="rule-list">
                                <li>–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –±–∏—Ç—å —Ä–µ–∫–æ—Ä–¥ –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –¥–Ω—è–º</li>
                                <li>–ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥ ‚Üí –±–æ–Ω—É—Å 500 —Ä—É–± –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –¥–µ–ø–æ–∑–∏—Ç—É</li>
                                <li>–ù–µ –ø–æ–±–∏–ª —Ä–µ–∫–æ—Ä–¥ ‚Üí —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–∞ –Ω–∞ 20% (—Å–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è –¥–æ—Ä–æ–∂–µ)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div id="quests" class="tab-content">
                    <h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h3>
                    <p style="margin-bottom: 15px; color: #B0B0B0;">–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∫–≤–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤ –∏ –∏–∑–±–µ–∂–∞–Ω–∏—è —à—Ç—Ä–∞—Ñ–æ–≤.</p>
                    
                    <div id="daily-quests">
                        <!-- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                    
                    <h3 style="margin-top: 25px;">–ù–µ–¥–µ–ª—å–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h3>
                    
                    <div id="weekly-quests">
                        <!-- –ù–µ–¥–µ–ª—å–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
                
                <div id="levels" class="tab-content">
                    <h3>–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π</h3>
                    <p style="margin-bottom: 15px; color: #B0B0B0;">–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –≤–∞—à–∏—Ö –Ω–∞–≤—ã–∫–æ–≤.</p>
                    
                    <div class="rule-section">
                        <div class="rule-title">
                            <span class="level-badge level-novice">–ù–û–í–ò–ß–û–ö</span> (–±–∞–∑–∞)
                        </div>
                        <ul class="rule-list">
                            <li>–°–æ–Ω 7-8 —á–∞—Å–æ–≤</li>
                            <li>–ï–¥–∞ (–∑–¥–æ—Ä–æ–≤–∞—è)</li>
                            <li>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 30 –º–∏–Ω</li>
                        </ul>
                    </div>
                    
                    <div class="rule-section">
                        <div class="rule-title">
                            <span class="level-badge level-fighter">–ë–û–ï–¶</span> (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è)
                        </div>
                        <ul class="rule-list">
                            <li>–í—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏ –ù–æ–≤–∏—á–∫–∞</li>
                            <li>–î–æ–º–∞—à–∫–∞ –∫–æ—Ä–µ–π—Å–∫–æ–≥–æ (–ø–æ–ª–Ω–æ—Å—Ç—å—é)</li>
                            <li>–°–æ—Ü—Å–µ—Ç–∏ ‚â§ 90 –º–∏–Ω</li>
                            <li>No Porn/Alcohol</li>
                        </ul>
                    </div>
                    
                    <div class="rule-section">
                        <div class="rule-title">
                            <span class="level-badge level-veteran">–í–ï–¢–ï–†–ê–ù</span> (–º–∞–∫—Å–∏–º—É–º)
                        </div>
                        <ul class="rule-list">
                            <li>–í—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏ –ë–æ–π—Ü–∞</li>
                            <li>1 —Å–µ—Ä–∏—è –¥–æ—Ä–∞–º—ã –±–µ–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ + —Ä–∞–∑–±–æ—Ä 5 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</li>
                            <li>–ß—Ç–µ–Ω–∏–µ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–°–æ–ª—è—Ä–∏—Å"</li>
                        </ul>
                    </div>
                </div>
                
                <div id="history" class="tab-content">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –Ω–µ–¥–µ–ª—å</h3>
                    <p style="margin-bottom: 15px; color: #B0B0B0;">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –Ω–µ–¥–µ–ª–∏.</p>
                    
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>–ù–µ–¥–µ–ª—è</th>
                                <th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
                                <th>–î–µ–ø–æ–∑–∏—Ç</th>
                                <th>–í–æ–∑–≤—Ä–∞—Ç</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="history-table-body">
                            <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div id="settings" class="tab-content">
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–µ–∫–µ—Ä–∞</h3>
                    <p style="margin-bottom: 15px; color: #B0B0B0;">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç—Ä–µ–∫–µ—Ä –ø–æ–¥ —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏.</p>
                    
                    <div class="settings-panel">
                        <div class="setting-item">
                            <label>–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</label>
                            <select id="difficulty-level">
                                <option value="novice">–ù–æ–≤–∏—á–æ–∫</option>
                                <option value="fighter" selected>–ë–æ–µ—Ü</option>
                                <option value="veteran">–í–µ—Ç–µ—Ä–∞–Ω</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç (‚ÇΩ)</label>
                            <input type="number" id="weekly-deposit-input" value="1000" min="500" step="100">
                        </div>
                        
                        <div class="setting-item">
                            <label>–ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏</label>
                            <select id="week-start">
                                <option value="0">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                                <option value="1">–í—Ç–æ—Ä–Ω–∏–∫</option>
                                <option value="2">–°—Ä–µ–¥–∞</option>
                                <option value="3">–ß–µ—Ç–≤–µ—Ä–≥</option>
                                <option value="4">–ü—è—Ç–Ω–∏—Ü–∞</option>
                                <option value="5">–°—É–±–±–æ—Ç–∞</option>
                                <option value="6">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</label>
                            <select id="notifications">
                                <option value="enabled">–í–∫–ª—é—á–µ–Ω—ã</option>
                                <option value="disabled">–í—ã–∫–ª—é—á–µ–Ω—ã</option>
                            </select>
                        </div>
                        
                        <button class="btn" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                    
                    <div class="export-section">
                        <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                        <p style="margin-bottom: 15px; color: #B0B0B0;">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∞.</p>
                        
                        <div class="export-buttons">
                            <button class="export-btn" onclick="exportData('csv')">
                                üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
                            </button>
                            <button class="export-btn" onclick="exportData('json')">
                                üìÅ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON
                            </button>
                            <button class="export-btn" onclick="importData()">
                                üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const appData = {
            currentWeek: 0,
            weeks: [
                {
                    startDate: '16 –ù–æ—è–±—Ä—è 2025',
                    endDate: '22 –ù–æ—è–±—Ä—è 2025',
                    deposit: 1000,
                    habits: [
                        { id: 1, name: '–°–æ–Ω 7-8 —á–∞—Å–æ–≤', level: 'novice', completed: true },
                        { id: 2, name: '–ï–¥–∞ (–∑–¥–æ—Ä–æ–≤–∞—è)', level: 'novice', completed: true },
                        { id: 3, name: '–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 30 –º–∏–Ω', level: 'novice', completed: true },
                        { id: 4, name: '–î–æ–º–∞—à–∫–∞ –∫–æ—Ä–µ–π—Å–∫–æ–≥–æ', level: 'fighter', completed: true },
                        { id: 5, name: '–°–æ—Ü—Å–µ—Ç–∏ ‚â§ 90 –º–∏–Ω', level: 'fighter', completed: false },
                        { id: 6, name: 'No Porn/Alcohol', level: 'fighter', completed: true },
                        { id: 7, name: '1 —Å–µ—Ä–∏—è –¥–æ—Ä–∞–º—ã –±–µ–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤', level: 'veteran', completed: false },
                        { id: 8, name: '–ß—Ç–µ–Ω–∏–µ "–°–æ–ª—è—Ä–∏—Å" (1 —Å—Ç—Ä.)', level: 'veteran', completed: false }
                    ],
                    quests: {
                        daily: [
                            { id: 1, name: '–î–æ–º–∞—à–∫–∞ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)', completed: true },
                            { id: 2, name: '–ß—Ç–µ–Ω–∏–µ "–°–æ–ª—è—Ä–∏—Å" (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞)', completed: false },
                            { id: 3, name: '–î–æ—Ä–∞–º–∞ –±–µ–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ + —Ä–∞–∑–±–æ—Ä 5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π', completed: false }
                        ],
                        weekly: [
                            { id: 4, name: '–°–ª–æ–≤–∞—Ä—å –∏–∑ 35 –Ω–æ–≤—ã—Ö —Å–ª–æ–≤/–≤—ã—Ä–∞–∂–µ–Ω–∏–π', completed: false },
                            { id: 5, name: 'Summary –≤—Å–µ–π –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–π –¥–æ—Ä–∞–º—ã –∑–∞ –Ω–µ–¥–µ–ª—é', completed: false }
                        ]
                    },
                    comboDays: 3,
                    progress: 63
                }
            ],
            history: [
                { week: '9-15 –ù–æ—è–±—Ä—è 2025', progress: '71%', deposit: '1,000 ‚ÇΩ', return: '2,000 ‚ÇΩ', status: '–£—Å–ø–µ—Ö' },
                { week: '2-8 –ù–æ—è–±—Ä—è 2025', progress: '43%', deposit: '1,000 ‚ÇΩ', return: '0 ‚ÇΩ', status: '–ü—Ä–æ–≤–∞–ª' },
                { week: '26 –û–∫—Ç—è–±—Ä—è - 1 –ù–æ—è–±—Ä—è 2025', progress: '57%', deposit: '1,200 ‚ÇΩ', return: '0 ‚ÇΩ', status: '–ü—Ä–æ–≤–∞–ª' },
                { week: '19-25 –û–∫—Ç—è–±—Ä—è 2025', progress: '64%', deposit: '1,000 ‚ÇΩ', return: '1,000 ‚ÇΩ', status: '–ß–∞—Å—Ç–∏—á–Ω—ã–π' }
            ],
            settings: {
                difficulty: 'fighter',
                deposit: 1000,
                weekStart: 0,
                notifications: 'enabled'
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            renderHabits();
            renderQuests();
            renderHistory();
            updateProgress();
            updateWeekDisplay();
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
        function loadData() {
            const savedData = localStorage.getItem('rpgTrackerData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(appData, parsedData);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
        function saveData() {
            localStorage.setItem('rpgTrackerData', JSON.stringify(appData));
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫
        function renderHabits() {
            const habitsList = document.getElementById('habits-list');
            habitsList.innerHTML = '';
            
            const currentWeek = appData.weeks[appData.currentWeek];
            
            currentWeek.habits.forEach(habit => {
                const habitItem = document.createElement('div');
                habitItem.className = 'habit-item';
                
                const levelClass = `level-${habit.level}`;
                const levelText = habit.level === 'novice' ? '–ù–æ–≤–∏—á–æ–∫' : 
                                 habit.level === 'fighter' ? '–ë–æ–µ—Ü' : '–í–µ—Ç–µ—Ä–∞–Ω';
                
                habitItem.innerHTML = `
                    <div class="habit-checkbox ${habit.completed ? 'checked' : ''}" onclick="toggleHabit(${habit.id})"></div>
                    <div>${habit.name} <span class="level-badge ${levelClass}">${levelText}</span></div>
                `;
                
                habitsList.appendChild(habitItem);
            });
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤
        function renderQuests() {
            const dailyQuests = document.getElementById('daily-quests');
            const weeklyQuests = document.getElementById('weekly-quests');
            
            dailyQuests.innerHTML = '';
            weeklyQuests.innerHTML = '';
            
            const currentWeek = appData.weeks[appData.currentWeek];
            
            // –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
            currentWeek.quests.daily.forEach(quest => {
                const questItem = document.createElement('div');
                questItem.className = 'quest-item';
                questItem.innerHTML = `
                    <div class="quest-checkbox ${quest.completed ? 'checked' : ''}" onclick="toggleQuest('daily', ${quest.id})"></div>
                    <div>
                        <div>${quest.name}</div>
                        <div style="font-size: 0.9rem; color: #B0B0B0;">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–≤–µ—Å—Ç</div>
                    </div>
                `;
                dailyQuests.appendChild(questItem);
            });
            
            // –ù–µ–¥–µ–ª—å–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
            currentWeek.quests.weekly.forEach(quest => {
                const questItem = document.createElement('div');
                questItem.className = 'quest-item';
                questItem.innerHTML = `
                    <div class="quest-checkbox ${quest.completed ? 'checked' : ''}" onclick="toggleQuest('weekly', ${quest.id})"></div>
                    <div>
                        <div>${quest.name}</div>
                        <div style="font-size: 0.9rem; color: #B0B0B0;">–ù–µ–¥–µ–ª—å–Ω—ã–π –∫–≤–µ—Å—Ç</div>
                    </div>
                `;
                weeklyQuests.appendChild(questItem);
            });
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
        function renderHistory() {
            const historyTableBody = document.getElementById('history-table-body');
            historyTableBody.innerHTML = '';
            
            appData.history.forEach(week => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                if (week.status === '–£—Å–ø–µ—Ö') statusClass = 'money-positive';
                else if (week.status === '–ü—Ä–æ–≤–∞–ª') statusClass = 'money-negative';
                
                row.innerHTML = `
                    <td>${week.week}</td>
                    <td>${week.progress}</td>
                    <td>${week.deposit}</td>
                    <td class="${statusClass}">${week.return}</td>
                    <td>${week.status}</td>
                `;
                
                historyTableBody.appendChild(row);
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
        function toggleHabit(habitId) {
            const currentWeek = appData.weeks[appData.currentWeek];
            const habit = currentWeek.habits.find(h => h.id === habitId);
            
            if (habit) {
                habit.completed = !habit.completed;
                saveData();
                renderHabits();
                updateProgress();
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
        function toggleQuest(type, questId) {
            const currentWeek = appData.weeks[appData.currentWeek];
            const quests = type === 'daily' ? currentWeek.quests.daily : currentWeek.quests.weekly;
            const quest = quests.find(q => q.id === questId);
            
            if (quest) {
                quest.completed = !quest.completed;
                saveData();
                renderQuests();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress() {
            const currentWeek = appData.weeks[appData.currentWeek];
            
            // –ü–æ–¥—Å—á–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫
            const completedHabits = currentWeek.habits.filter(h => h.completed).length;
            const totalHabits = currentWeek.habits.length;
            const progress = Math.round((completedHabits / totalHabits) * 100);
            
            currentWeek.progress = progress;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            document.getElementById('day-progress').textContent = `${progress}%`;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('habits-completed').textContent = `${completedHabits}/${totalHabits}`;
            document.getElementById('combo-days').textContent = `${currentWeek.comboDays} –¥–Ω–µ–π`;
            document.getElementById('weekly-deposit').textContent = `${currentWeek.deposit} ‚ÇΩ`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–±–æ-–¥–∏—Å–ø–ª–µ—è
            const comboDisplay = document.getElementById('combo-display');
            if (currentWeek.comboDays >= 7) {
                comboDisplay.innerHTML = `
                    <div>–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–æ–º–±–æ: ${currentWeek.comboDays} –¥–Ω–µ–π</div>
                    <div class="combo-count">7 –¥–Ω–µ–π ‚Üí –≤–æ–∑–≤—Ä–∞—Ç √ó2</div>
                    <div>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–±–æ!</div>
                `;
            } else if (currentWeek.comboDays >= 5) {
                comboDisplay.innerHTML = `
                    <div>–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–æ–º–±–æ: ${currentWeek.comboDays} –¥–Ω–µ–π</div>
                    <div class="combo-count">5 –¥–Ω–µ–π ‚Üí 100% –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–ø–æ–∑–∏—Ç–∞</div>
                    <div>–°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å: 7 –¥–Ω–µ–π ‚Üí –≤–æ–∑–≤—Ä–∞—Ç √ó2</div>
                `;
            } else if (currentWeek.comboDays >= 3) {
                comboDisplay.innerHTML = `
                    <div>–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–æ–º–±–æ: ${currentWeek.comboDays} –¥–Ω–µ–π</div>
                    <div class="combo-count">3 –¥–Ω—è ‚Üí 50% –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–ø–æ–∑–∏—Ç–∞</div>
                    <div>–°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å: 5 –¥–Ω–µ–π ‚Üí 100% –≤–æ–∑–≤—Ä–∞—Ç–∞</div>
                `;
            } else {
                comboDisplay.innerHTML = `
                    <div>–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–æ–º–±–æ: ${currentWeek.comboDays} –¥–Ω–µ–π</div>
                    <div class="combo-count">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–º–±–æ</div>
                    <div>–°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å: 3 –¥–Ω—è ‚Üí 50% –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–ø–æ–∑–∏—Ç–∞</div>
                `;
            }
            
            saveData();
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // –°–º–µ–Ω–∞ –Ω–µ–¥–µ–ª–∏
        function changeWeek(direction) {
            appData.currentWeek += direction;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            if (appData.currentWeek < 0) appData.currentWeek = 0;
            if (appData.currentWeek >= appData.weeks.length) {
                // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –Ω–µ–¥–µ–ª—é, –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –∫–æ–Ω—Ü–∞
                const lastWeek = appData.weeks[appData.weeks.length - 1];
                const newWeek = JSON.parse(JSON.stringify(lastWeek));
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –Ω–æ–≤–æ–π –Ω–µ–¥–µ–ª–∏
                newWeek.habits.forEach(habit => habit.completed = false);
                newWeek.quests.daily.forEach(quest => quest.completed = false);
                newWeek.quests.weekly.forEach(quest => quest.completed = false);
                newWeek.comboDays = 0;
                newWeek.progress = 0;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—ã (–ø—Ä–æ—Å—Ç–∞—è –∏–º–∏—Ç–∞—Ü–∏—è)
                const startDate = new Date();
                startDate.setDate(startDate.getDate() + (appData.weeks.length * 7));
                const endDate = new Date(startDate);
                endDate.setDate(endDate.getDate() + 6);
                
                newWeek.startDate = formatDate(startDate);
                newWeek.endDate = formatDate(endDate);
                
                appData.weeks.push(newWeek);
            }
            
            updateWeekDisplay();
            renderHabits();
            renderQuests();
            updateProgress();
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
        function formatDate(date) {
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('ru-RU', options);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–¥–µ–ª–∏
        function updateWeekDisplay() {
            const currentWeek = appData.weeks[appData.currentWeek];
            document.querySelector('.week-selector h3').textContent = 
                `–ù–µ–¥–µ–ª—è: ${currentWeek.startDate} - ${currentWeek.endDate}`;
            document.querySelector('.week-selector p strong').textContent = 
                `${currentWeek.deposit} ‚ÇΩ`;
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function saveSettings() {
            appData.settings.difficulty = document.getElementById('difficulty-level').value;
            appData.settings.deposit = parseInt(document.getElementById('weekly-deposit-input').value);
            appData.settings.weekStart = parseInt(document.getElementById('week-start').value);
            appData.settings.notifications = document.getElementById('notifications').value;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é
            const currentWeek = appData.weeks[appData.currentWeek];
            currentWeek.deposit = appData.settings.deposit;
            
            saveData();
            updateProgress();
            updateWeekDisplay();
            
            alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function exportData(format) {
            let dataStr, fileName, mimeType;
            
            if (format === 'csv') {
                // –ü—Ä–æ—Å—Ç–æ–π CSV —ç–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
                let csvContent = "–ù–µ–¥–µ–ª—è,–ü—Ä–æ–≥—Ä–µ—Å—Å,–î–µ–ø–æ–∑–∏—Ç,–í–æ–∑–≤—Ä–∞—Ç,–°—Ç–∞—Ç—É—Å\n";
                
                appData.history.forEach(week => {
                    csvContent += `"${week.week}","${week.progress}","${week.deposit}","${week.return}","${week.status}"\n`;
                });
                
                dataStr = "data:text/csv;charset=utf-8," + encodeURIComponent(csvContent);
                fileName = "rpg_tracker_history.csv";
                mimeType = "text/csv";
            } else {
                // JSON —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
                dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(appData, null, 2));
                fileName = "rpg_tracker_data.json";
                mimeType = "application/json";
            }
            
            const link = document.createElement("a");
            link.setAttribute("href", dataStr);
            link.setAttribute("download", fileName);
            link.click();
        }

        // –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        Object.assign(appData, importedData);
                        saveData();
                        
                        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                        renderHabits();
                        renderQuests();
                        renderHistory();
                        updateProgress();
                        updateWeekDisplay();
                        
                        alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
                    } catch (error) {
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
    </script>
</body>
</html>